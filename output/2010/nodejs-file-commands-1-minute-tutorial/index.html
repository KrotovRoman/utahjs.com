<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <title>Nodejs File Commands - 1 Minute Tutorial | Utah JavaScript User Group</title>
  <meta name="description" content="UtahJS is the website for the Utah JavaScript Users Group that meets to discuss and enjoy JavaScript!">
  <meta name="author" content="Members of the Utah JavaScript User Group">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/style.css">
</head>
<body class="body-article">
  <div id=header class="group">
    <h1 class=title>UtahJS</h1>
    <ul>
      <li><a href="/">Articles</a></li>
      
        <li><a href="/meetings/">Meetings</a></li>
      
        <li><a href="/members/">Members</a></li>
      
        <li><a href="/contributing/">Join / Contribute</a></li>
      
    </ul>
  </div>

<div id=main class=group>
  <h1 class=articleTitle>Nodejs File Commands - 1 Minute Tutorial</h1>
  <p><i>By Ken D. Snyder, published 2010-09-25</i></p>
I want to share 2 quick things I learned writing my first Nodejs script: 1. __dirname, 2. synchronous file reading. 1. When running a script, the current working directory is the directory in which you invoked the script that started the server. Sounds normal for running a script from the command line, but it is really unintuitive if you are used to scripting languages like php or ruby that are invoked by Apache. So, for example, if you are in your home directory and you execute `nodejs /var/node/apps/myapp.js`, the current working directory is your home directory. That is where __dirname comes in. __dirname is a constant defined by Nodejs that represents the directory of the currently executing server. In my example, __dirname == "/var/node/apps";. So you'll want to use __dirname any time you need to manipulate files. 2. Nodejs encourages file reading to be asynchronous. One major reason is that a file read error such as file does not exist crashes your app. Another is that most of the time it is helpful to have other things run while the file is reading. In my case, I needed to load a file before I could accept connections, so I synchronous is the way to go. I needed just the contents; I discovered that opening files returns an object, but casting the object to a string yields the contents. Here is the code: <pre>var fs = require('fs'); var contents = String(fs.readFileSync(__dirname + '/file.txt'));</pre> That's it! Reading files is easy.
</div>
<div id=meta>
  <div class="author">
    <img src="http://www.gravatar.com/avatar/933f8aca35c8c26bb4df7aea5284017c?s=200&&d=monsterid">
    <h3>About the Author</h3>
    <dl class=meta>

      <dt>Name:</dt>
      <dd>Ken D. Snyder</dd>

      
        <dt>Location:</dt>
        <dd>Somewhere, UT</dd>
      

      
        <dt>Github:</dt>
        <dd><a href="https://github.com/kensnyder">kensnyder</a></dd>
      

      
        <dt>Twitter:</dt>
        <dd><a href="https://github.com/kencoder">kencoder</a></dd>
      

      
        <dt>Website:</dt>
        <dd><a href="http://Ken.com/">http://Ken.com/</a></dd>
      

    </dl>
    <p class=about>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  </div>
  <div class="website">
    <h3>About UtahJS.com</h3>
    <p>UtahJS is the website for the Utah JavaScript Users Group that meets to discuss and enjoy JavaScript!</p>
<p>JavaScript in the browser, on the server or just about anywhere else.</p>
<p>We love JavaScript but quite often talk about other topics such as CSS, HTML, cross browser coding, the internetâ€¦ pretty much, anything that we find interesting.</p>
<p>Everyone is welcome. Please join us!</p>
  </div>
</div>

<div id=footer>
  <p>Site design and code &copy; 2011 UtahJS, MIT license.</p>
<p>Content and articles are copyrighted to the individual authors.</p>
</div>

<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview'],['_trackPageLoadTime']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/js/hilite.js"></script>
<script src="/js/languages/javascript.js"></script>
<script src="/js/app.js"></script>

<!--[if lt IE 7 ]>
  <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
  <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
<![endif]-->
  
</body>
</html>
